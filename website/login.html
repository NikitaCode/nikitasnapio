<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">

    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script>
      var vars = {};
      var companypage = 0

      function getUrlVars() {
          var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
              vars[key] = value;
          });
          return vars;
      }

      getUrlVars()

      window.onload = function() {

        document.getElementById("companylogo").src="images/"+vars.type+"_logo.png";
        
        //authentication process
        $(document).ready(function(){
        // Get value on button click and print
        $("#submitbutton").click(function(){
          var email = $("#inputEmail").val();
          var pass = $("#inputPassword").val();
          console.log("This is whats in the text boxes: ", email, pass);

          //json extraction

        $.getJSON('http://127.0.0.1:5500/website/data.json', function (response) {
          console.log('json response', response);
          
          //checks if what typed in and json is matched
          if (email == response.logins[vars.type].username && pass == response.logins[vars.type].password) {
            console.log("succesfully typed in password and username");
            $(".welcome").removeClass("d-none");
            $(".form-signin").addClass("d-none");
          } else {
            console.log("either the password or username or password")
            // error handling
            $(".alert").removeClass("d-none")
          }

          });

          
          });

        });

      }    
      </script>

    <title>Nikita Project</title>
  </head>
  <body>

    <body class="text-center" data-gr-c-s-loaded="true">
      <form class="form-signin">
        <img class="mb-4" id="companylogo" src="images/facebook_logo.png" alt="" width="100" height="100">
        <h1 class="h3 mb-3 font-weight-normal">Please sign in</h1>
        <div class="alert alert-danger d-none">
          <strong>Could not sign in!</strong> Either your password or email is wrong, Try again later.
        </div>
        <label for="inputEmail" class="sr-only">Email address</label>
        <input type="email" id="inputEmail" class="form-control" placeholder="Email address" required="" autofocus="">
        <label for="inputPassword" class="sr-only">Password</label>
        <input type="password" id="inputPassword" class="form-control" placeholder="Password" required="">
        <div class="checkbox mb-3">
        </div>
        <button id="submitbutton" type="button" class="btn btn-lg btn-primary btn-block">Sign in</button>
        <p class="mt-5 mb-3 text-muted">Â© 2020 Nikita</p>
      </form>
      <div class="welcome d-none">
        Welcome
      </div>
    
  
  </body>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  </body>
</html>